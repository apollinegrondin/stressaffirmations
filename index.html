<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Affirmations & Community</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        nav {
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        nav ul {
            display: flex;
            justify-content: center;
            gap: 30px;
            list-style: none;
        }

        nav a {
            color: #2c3e50;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        nav a.active {
            background: #2c3e50;
            color: white;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Sound Controls */
        .sound-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .sound-button {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            background: white;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .sound-button:hover {
            transform: translateY(-2px);
        }

        .sound-button.active {
            background: #2c3e50;
            color: white;
        }

        /* Affirmation Card */
        .affirmation-card {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            text-align: center;
            margin: 20px auto;
            max-width: 600px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .affirmation-card:hover {
            transform: translateY(-5px);
        }

        /* Community Wall */
        .community-wall {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .post-form {
            margin-bottom: 30px;
        }

        .post-form textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 10px;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 100px;
        }

        .post-form button {
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .wall-post {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .wall-post .post-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .timestamp {
            color: #666;
            font-size: 0.9em;
        }

        .delete-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background-color 0.3s ease;
        }

        .delete-btn:hover {
            background: #cc0000;
        }

        /* About Page */
        .about-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            line-height: 1.6;
        }

        .about-content h2 {
            margin-bottom: 20px;
        }

        .about-content p {
            margin-bottom: 15px;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            justify-content: center;
        }

        .volume-slider {
            width: 200px;
        }

        button {
            transition: all 0.3s ease;
        }

        button:hover {
            opacity: 0.9;
        }
    </style>
    <!-- profanity-cleaner library -->
    <script src="https://cdn.jsdelivr.net/npm/profanity-cleaner@latest"></script>
</head>
<body>
    <div class="container">
        <nav>
            <ul>
                <li><a href="#home" class="active">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#wall">Community Wall</a></li>
            </ul>
        </nav>

        <!-- Home Page -->
        <div id="home" class="page active">
            <header>
                <h1>Daily Affirmations</h1>
                <p>Find your peace with soothing sounds and positive affirmations</p>
            </header>

            <div class="sound-controls">
                <button class="sound-button" data-sound="white">White Noise</button>
                <button class="sound-button" data-sound="pink">Pink Noise</button>
                <button class="sound-button" data-sound="brown">Brown Noise</button>
                <button class="sound-button" data-sound="green">Green Noise</button>
            </div>

            <div class="volume-control">
                <label for="volume">Volume:</label>
                <input type="range" id="volume" class="volume-slider" min="0" max="1" step="0.1" value="0.5">
            </div>

            <div class="affirmation-card">
                <p class="affirmation-text">Click for your first affirmation</p>
                <button class="next-button">Next Affirmation</button>
            </div>
        </div>

        <!-- About Page -->
        <div id="about" class="page">
            <div class="about-content">
                <h2>About Our Community</h2>
                <p>Welcome to our affirmations community! This space was created with one simple goal: to help people feel less alone and more empowered in their daily lives.</p>
                <p>Here, you can:</p>
                <ul>
                    <li>Read and reflect on daily affirmations</li>
                    <li>Listen to soothing background sounds to help you focus and relax</li>
                    <li>Connect with others through our Community Wall</li>
                    <li>Share your own experiences and support others</li>
                </ul>
                <p>Remember, you're not alone on this journey. Every person who visits this site is looking for the same thing: connection, support, and personal growth.</p>
            </div>
        </div>

        <!-- Community Wall -->
        <div id="wall" class="page">
            <header>
                <h2>Community Wall</h2>
                <p>Share your thoughts, experiences, and support with others</p>
            </header>
            
            <div class="community-wall">
                <div class="post-form">
                    <textarea placeholder="Share your thoughts or experiences..."></textarea>
                    <button onclick="addPost()">Share</button>
                </div>
                <div id="posts-container">
                    <!-- posts will be added here -->
                </div>
            </div>
        </div>
    </div>

    <!-- list of words to be used for sentiment analysis -->
<script>
const AFINN = {
    'good': 3, 'great': 3, 'amazing': 4, 'excellent': 4, 'wonderful': 4,
    'bad': -3, 'terrible': -4, 'horrible': -4, 'awful': -4,
    'love': 3, 'hate': -3, 'happy': 3, 'sad': -2,
    'beautiful': 3, 'ugly': -3, 'perfect': 3, 'worst': -3,
    'positive': 2, 'negative': -2, 'blessed': 3, 'curse': -3,
    'fantastic': 4, 'nice': 2, 'poor': -2, 'pleasant': 2,
    'grateful': 3, 'thankful': 3, 'appreciate': 2, 'angry': -3,
    'excited': 3, 'inspired': 3, 'calm': 2, 'peaceful': 2,
    'confident': 2, 'worthy': 2, 'capable': 2, 'strong': 2,
    'hope': 2, 'hopeless': -3, 'bright': 2, 'dark': -2
};

function containsProfanity(text) {
    const cleanedText = profanityCleaner.clean(text);
    return cleanedText !== text; // Returns true if the text was modified (contained profanity)
}

function analyzeSentiment(text) {
    const words = text.toLowerCase().match(/\b\w+\b/g) || [];
    let score = 0;
    words.forEach(word => {
        if (AFINN[word] !== undefined) {
            score += AFINN[word];
        }
    });
    return score;
}</script>
<script>
        // nav links
        const navLinks = document.querySelectorAll('nav a');
        const pages = document.querySelectorAll('.page');

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                
                navLinks.forEach(l => l.classList.remove('active'));
                link.classList.add('active');
            
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === targetId) {
                        page.classList.add('active');
                    }
                });
            });
        });

        // lst of affirmations
        const affirmations = [
            "I am capable of achieving anything I set my mind to",
            "I choose to be confident and self-assured",
            "I am worthy of love, respect, and happiness",
            "I trust in my ability to make good decisions",
            "I am enough, just as I am",
            "I welcome abundance into my life",
            "I deserve success and I accept it now",
            "I am surrounded by love and support",
            "I radiate positive energy and attract positivity",
            "I am becoming better and stronger every day",
            "I choose peace and calm in all situations",
            "I am grateful for all that I have",
            "I attract opportunities effortlessly",
            "I am confident in my unique abilities",
            "I trust the journey of my life"
        ];

        // White, pink, brown, green noise
        let audioContext;
        let noiseNode;
        let gainNode;
        let currentSound = null;

        // initialize audio context on user interaction
        document.addEventListener('click', initializeAudio, { once: true });

        function initializeAudio() {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            gainNode = audioContext.createGain();
            gainNode.connect(audioContext.destination);
            
            const volumeSlider = document.getElementById('volume');
            gainNode.gain.value = volumeSlider.value;
        }

        // noise generation - should i use a library for this?
        function generateNoise(type) {
            const bufferSize = 4096;
            noiseNode = audioContext.createScriptProcessor(bufferSize, 1, 1);
            
            noiseNode.onaudioprocess = function(e) {
                const output = e.outputBuffer.getChannelData(0);
                
                for (let i = 0; i < bufferSize; i++) {
                    let noise = 0;
                    
                    switch(type) {
                        case 'white':
                            noise = Math.random() * 2 - 1;
                            break;
                        case 'pink':
                            noise = (Math.random() * 2 - 1) * 0.5;
                            break;
                        case 'brown':
                            noise = (Math.random() * 2 - 1) * 0.1;
                            break;
                        case 'green':
                            noise = (Math.random() * 2 - 1) * 0.75;
                            break;
                    }
                    output[i] = noise;
                }
            };
        }

        // control buttons
        const soundButtons = document.querySelectorAll('.sound-button');
        soundButtons.forEach(button => {
            button.addEventListener('click', function() {
                const soundType = this.dataset.sound;
                
                if (currentSound === soundType) {
                    if (noiseNode) {
                        noiseNode.disconnect();
                        noiseNode = null;
                    }
                    currentSound = null;
                    soundButtons.forEach(btn => btn.classList.remove('active'));
                } else {
                    if (noiseNode) {
                        noiseNode.disconnect();
                    }
                    
                    generateNoise(soundType);
                    noiseNode.connect(gainNode);
                    currentSound = soundType;
                    
                    soundButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                }
            });
        });

        // volume
        const volumeSlider = document.getElementById('volume');
        volumeSlider.addEventListener('input', function() {
            if (gainNode) {
                gainNode.gain.value = this.value;
            }
        });

        // random affirmation generator
        const affirmationText = document.querySelector('.affirmation-text');
        const nextButton = document.querySelector('.next-button');

        function getRandomAffirmation() {
            const randomIndex = Math.floor(Math.random() * affirmations.length);
            return affirmations[randomIndex];
        }

        function updateAffirmation() {
            affirmationText.textContent = getRandomAffirmation();
        }

        nextButton.addEventListener('click', updateAffirmation);
        document.querySelector('.affirmation-card').addEventListener('click', function(e) {
            if (e.target !== nextButton) {
                updateAffirmation();
            }
        });

        // community wall
        function addPost() {
            const textarea = document.querySelector('.post-form textarea');
            const content = textarea.value.trim();
            
            if (content) {
                // check for profanity first
                if (containsProfanity(content)) {
                    alert("Please keep our community friendly and avoid inappropriate language.");
                    return;
                }
                
                // then perform sentiment analysis
                const sentimentScore = analyzeSentiment(content);
                
                if (sentimentScore < 0) {
                    // Show error message for negative content
                    alert("We encourage positive and supportive messages in our community. Please rephrase your message to be more positive.");
                    return;
                }
                
                const postsContainer = document.getElementById('posts-container');
                const post = document.createElement('div');
                post.className = 'wall-post';
                
                const timestamp = new Date().toLocaleString();
                const postId = Date.now().toString(); // Unique ID for the post
                
                post.innerHTML = `
                    <p>${content}</p>
                    <div class="post-footer">
                        <div class="timestamp">${timestamp}</div>
                        <button class="delete-btn" onclick="deletePost('${postId}')">Delete</button>
                    </div>
                `;
                
                post.setAttribute('data-post-id', postId);
                postsContainer.insertBefore(post, postsContainer.firstChild);
                textarea.value = '';
                
                // save post to localStorage
                savePost(content, postId);
            }
        }

        function deletePost(postId) {
            // ask for confirmation
            if (confirm('Are you sure you want to delete this post?')) {
                // remove from database
                const post = document.querySelector(`[data-post-id="${postId}"]`);
                if (post) {
                    post.remove();
                }
                
                // remove from localStorage
                const posts = JSON.parse(localStorage.getItem('communityPosts') || '[]');
                const updatedPosts = posts.filter(post => post.id !== postId);
                localStorage.setItem('communityPosts', JSON.stringify(updatedPosts));
            }
        }

        // Store posts in localStorage
        function loadPosts() {
            const posts = JSON.parse(localStorage.getItem('communityPosts') || '[]');
            const postsContainer = document.getElementById('posts-container');
            
            posts.forEach(post => {
                const postElement = document.createElement('div');
                postElement.className = 'wall-post';
                postElement.innerHTML = `
                    <p>${post.content}</p>
                    <div class="timestamp">${post.timestamp}</div>
                `;
                postsContainer.appendChild(postElement);
            });
        }

        function savePost(content, postId) {
            const posts = JSON.parse(localStorage.getItem('communityPosts') || '[]');
            posts.unshift({
                id: postId,
                content,
                timestamp: new Date().toLocaleString()
            });
            localStorage.setItem('communityPosts', JSON.stringify(posts));
        }

        // load posts when the page loads
        loadPosts();
    </script>
</body>
</html>